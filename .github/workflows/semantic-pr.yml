name: Semantic PR Title

on:
    pull_request:
        types: [opened, edited, synchronize, reopened]

permissions:
    pull-requests: read
    statuses: write

jobs:
    semantic-pr:
        name: Validate PR Title
        runs-on: ubuntu-latest
        steps:
            -   name: Validate PR title
                uses: amannn/action-semantic-pull-request@0723387faaf9b38adef4775cd42cfd5155ed6017 # v5.5.3
                env:
                    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                with:
                    # Configure which types are allowed (should match commitlint config)
                    types: |
                        feat
                        fix
                        docs
                        style
                        refactor
                        perf
                        test
                        build
                        ci
                        chore
                        revert
                    # Require scope is optional - set to true if you want to enforce scopes
                    requireScope: false
                    # Subject (description after type) may not be empty
                    subjectPattern: ^.+$
                    subjectPatternError: |
                        The subject (commit message after type) may not be empty.
                    # If PR is labeled with one of these, skip validation
                    ignoreLabels: |
                        bot
                        ignore-semantic-pull-request
                    # Validate all commits in PR, not just the title
                    validateSingleCommit: true
                    # Error message when validation fails
                    headerPattern: '^(\w+)(\(\w+\))?: (.+)$'
                    headerPatternCorrespondence: 'type, scope, subject'
